<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/samesh-favicon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/samesh-favicon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/samesh-favicon.png">
  <link rel="mask-icon" href="/images/samesh-favicon.png" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.sameshlakhotia.tech","root":"/","scheme":"Mist","version":"8.0.0-rc.3","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Hi yâ€™all! Its been 4 weeks into the coding period of my GSoC 2020. First off, I have some good news to share: The task of creation of database schema where each resource has its own table, by reading">
<meta property="og:type" content="article">
<meta property="og:title" content="GSoC 2020 - Week 4 (Some good news too!)">
<meta property="og:url" content="https://www.sameshlakhotia.tech/week-4/index.html">
<meta property="og:site_name" content="Samesh Lakhotia">
<meta property="og:description" content="Hi yâ€™all! Its been 4 weeks into the coding period of my GSoC 2020. First off, I have some good news to share: The task of creation of database schema where each resource has its own table, by reading">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.pinimg.com/originals/f2/09/84/f20984b12874d68b5443dbbd124e22cc.gif">
<meta property="og:image" content="https://raw.githubusercontent.com/HTTP-APIs/hydrus/develop/docs/wiki/images/db_schema.png">
<meta property="og:image" content="https://www.sameshlakhotia.tech/images/week-4/drone_er.png">
<meta property="article:published_time" content="2020-06-28T21:52:38.000Z">
<meta property="article:modified_time" content="2020-08-26T13:42:23.572Z">
<meta property="article:author" content="Samesh Lakhotia">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.pinimg.com/originals/f2/09/84/f20984b12874d68b5443dbbd124e22cc.gif">

<link rel="canonical" href="https://www.sameshlakhotia.tech/week-4/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>GSoC 2020 - Week 4 (Some good news too!) | Samesh Lakhotia</title>
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-169390335-1"></script>
    <script>
      if (CONFIG.hostname === location.hostname) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-169390335-1');
      }
    </script>






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
        <span class="toggle-line toggle-line-first"></span>
        <span class="toggle-line toggle-line-middle"></span>
        <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Samesh Lakhotia</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about-me/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">9</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://www.sameshlakhotia.tech/week-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/samesh-avatar.png">
      <meta itemprop="name" content="Samesh Lakhotia">
      <meta itemprop="description" content="Software Development is ðŸ’™">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Samesh Lakhotia">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          GSoC 2020 - Week 4 (Some good news too!)
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: June 28th 2020 21:52:38" itemprop="dateCreated datePublished" datetime="2020-06-28T21:52:38+00:00">June 28th 2020</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: August 26th 2020 13:42:23" itemprop="dateModified" datetime="2020-08-26T13:42:23+00:00">August 26th 2020</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Hi yâ€™all!</p>
<p>Its been 4 weeks into the coding period of my GSoC 2020.</p>
<p>First off, I have some good news to share:</p>
<p><strong>The task of creation of database schema where each resource has its own table, by reading the ApiDoc on runtime has been completed!</strong></p>
<img src="https://i.pinimg.com/originals/f2/09/84/f20984b12874d68b5443dbbd124e22cc.gif" class="" title="HydraEcosystem" alt="HydraEcosystem logo">

<h2 id="Previous-schema"><a href="#Previous-schema" class="headerlink" title="Previous schema"></a>Previous schema</h2><img src="https://raw.githubusercontent.com/HTTP-APIs/hydrus/develop/docs/wiki/images/db_schema.png" class="" title="Hydrus Schema" alt="Hydus schema">

<h2 id="New-schema"><a href="#New-schema" class="headerlink" title="New schema"></a>New schema</h2><blockquote><p>As the new schema depends on the ApiDoc, the below schema is for this <a href="https://github.com/HTTP-APIs/hydrus/blob/master/hydrus/samples/hydra_doc_sample.py" target="_blank" rel="noopener">Drone ApiDoc</a>.</p>
</blockquote>

<img src="/images/week-4/drone_er.png" class="" width="1000" height="1000" title="New Drone schema" alt="New Drone schema">

<p>The ER Diagram isnâ€™t that clear because I didnâ€™t use any tool to draw it; I generated it using a tool called <a href="https://pypi.org/project/ERAlchemy/" target="_blank" rel="noopener">ERAlchemy</a>. Though, I will update it with a better one, ASAP.</p>
<p>I will explain the important bits here:</p>
<ul>
<li>All the tables are for the resources defined in the Drone ApiDoc.</li>
<li>The lines between them are foreign key constraints. These were established by checking if any of the <code>supportedProperty</code> of that resource are referencing any other resource. This could happen by either referencing them through the <em>property</em> attribute of that supportedProperty (for eg, <a href="https://github.com/HTTP-APIs/hydrus/blob/72b4cda49ab9cfe0fb775146e8d5113f5d6869e0/hydrus/samples/hydra_doc_sample.py#L628-L633" target="_blank" rel="noopener">â€˜vocab:Stateâ€™</a>) or through defining <em>hydra:Link</em> in the <em>property</em> attribute of that supportedProperty. The range of that <em>hydra:Link</em> would dictate the resource to which the foreign key is to be established (for eg, <a href="https://github.com/HTTP-APIs/hydrus/blob/72b4cda49ab9cfe0fb775146e8d5113f5d6869e0/hydrus/samples/hydra_doc_sample.py#L503-L509" target="_blank" rel="noopener">â€˜rangeâ€™: â€˜vocab:Stateâ€™</a>).</li>
<li>The <code>State</code> column in the <strong>Command</strong> table is acting like a foreign key to <strong>State</strong> table.</li>
<li>The <code>DroneState</code> column in the <strong>Drone</strong> table is acting like a foreign key to <strong>State</strong> table.</li>
<li>The <code>State</code> column, <code>Data</code> column, <code>Command</code> column in the <strong>LogEntry</strong> table are acting like a foreign keys to <strong>State</strong> table, <code>Datastream</code> table and <code>Command</code> table respectively.</li>
</ul>
<h2 id="Benefits-of-this-new-database-architecture"><a href="#Benefits-of-this-new-database-architecture" class="headerlink" title="Benefits of this new database architecture"></a>Benefits of this new database architecture</h2><ul>
<li>As this database architecture makes a table for each resource, this really improves its scalability and efficiency.</li>
<li>The database operations are much more efficient now.</li>
<li>The codebase (CRUD operations part) has become less complex. As now all the linking for RDF triples are done by the inherent database tables. Before, the schema was really generic, which meant, overhead on the developerâ€™s side to implement all the CRUD operations. But now, as the database has simplified to tables for each resource, this means that overhead is taken care by SQL-Alchemy. And we can get away with a very simple statement of the kind <code>table.insert(value)</code>(Thank you SQL-Alchemy).</li>
<li>Fun fact: If you will observe my <a href="https://github.com/HTTP-APIs/hydrus/pull/479" target="_blank" rel="noopener">PR</a> for this feature, you will observe that in net total, there is actually code that is removed from the codebase! Even after implementation of such big feature. This goes to prove the fact that this feature, bringing more optimisation to <em>hydrus</em>, infact reduces its complexity.</li>
</ul>
<h2 id="Learnings"><a href="#Learnings" class="headerlink" title="Learnings"></a>Learnings</h2><p>It took me a little more time than I anticipated for implementing this feature as the previous code for database operation was really tighly coupled to existing schema. There was not that much abstraction between the under the hood database queries and the higher level logic for parsing data.</p>
<p>This taught me how to write better decoupled code so the project becomes maintainable on a longer run.</p>
<p>Also, after completing this feature, I have become confident of ~97-99% of the <em>hydrus</em> codebase. As during implementation, I faced a lot of bugs in between which lead to many <code>pdb</code> sessions through which I navigated through deep stack traces and essentially going over a major chunk of the hydrus codebase, <em>line by line</em>.</p>
<p>I also faced many bugs in between and after spending some time trying to debug, Pythonâ€™s <em>pass by reference</em> hit right on my face (facepalm!)</p>
<p>All the work I have done for this feature is in this <a href="https://github.com/HTTP-APIs/hydrus/pull/479" target="_blank" rel="noopener">PR</a>.</p>
<h2 id="Path-Ahead"><a href="#Path-Ahead" class="headerlink" title="Path Ahead"></a>Path Ahead</h2><p>The Phase 1 evaluations are coming up tomorrow. Fingers crossed.</p>
<p>Also, the next problem we would like to tackle is the <a href="https://github.com/HTTP-APIs/hydrus/issues/416" target="_blank" rel="noopener">Treating collections as a resource</a> in <em>hydrus</em>. Looking forward towards going about it!</p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/week-2/" rel="prev" title="GSoC 2020 - Week 2">
      <i class="fa fa-chevron-left"></i> GSoC 2020 - Week 2
    </a></div>
      <div class="post-nav-item">
    <a href="/week-6/" rel="next" title="GSoC 2020 - Week 6">
      GSoC 2020 - Week 6 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Previous-schema"><span class="nav-number">1.</span> <span class="nav-text">Previous schema</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#New-schema"><span class="nav-number">2.</span> <span class="nav-text">New schema</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Benefits-of-this-new-database-architecture"><span class="nav-number">3.</span> <span class="nav-text">Benefits of this new database architecture</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Learnings"><span class="nav-number">4.</span> <span class="nav-text">Learnings</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Path-Ahead"><span class="nav-number">5.</span> <span class="nav-text">Path Ahead</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Samesh Lakhotia"
      src="/images/samesh-avatar.png">
  <p class="site-author-name" itemprop="name">Samesh Lakhotia</p>
  <div class="site-description" itemprop="description">Software Development is ðŸ’™</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/sameshl" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;sameshl" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:samesh.lakhotia+work@gmail.com" title="E-Mail â†’ mailto:samesh.lakhotia+work@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/samesh_l" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;samesh_l" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.linkedin.com/in/samesh-lakhotia/" title="Linkedin â†’ https:&#x2F;&#x2F;www.linkedin.com&#x2F;in&#x2F;samesh-lakhotia&#x2F;" rel="noopener" target="_blank"><i class="fab fa-linkedin fa-fw"></i>Linkedin</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Samesh Lakhotia</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
